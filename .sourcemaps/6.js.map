{"version":3,"sources":["../../src/pages/options/options.module.ts","../../src/pages/options/options.ts"],"names":[],"mappings":"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","file":"6.js","sourcesContent":["import { TranslateModule } from '@ngx-translate/core';\r\nimport { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { OptionsPage } from './options';\r\n\r\n@NgModule({\r\n    declarations: [OptionsPage],\r\n    imports: [IonicPageModule.forChild(OptionsPage), TranslateModule],\r\n    exports: [OptionsPage]\r\n})\r\nexport class OptionsPageModule { }\n\n\n// WEBPACK FOOTER //\n// ./src/pages/options/options.module.ts","import { UserProvider } from '../../providers/user-provider';\r\nimport { Component } from '@angular/core';\r\nimport { IonicPage, NavController } from 'ionic-angular';\r\n//import { BackgroundMode } from '@ionic-native/background-mode';\r\nimport { AuthProvider } from '../../providers/auth-provider';\r\nimport { ConfProvider } from '../../providers/conf-provider';\r\nimport { User, UserOption } from '../../providers/epm-types';\r\n\r\n@IonicPage()\r\n@Component({\r\n    selector: 'page-options',\r\n    templateUrl: 'options.html'\r\n})\r\nexport class OptionsPage {\r\n    public user: User;\r\n    private developer: boolean = false;\r\n\r\n    private opt_notifMessages: boolean;\r\n    private opt_notifAppointments: boolean;\r\n    private opt_runBackground: boolean;\r\n    private DEFAULT_NOTIF_APPOINTMENTS = false;\r\n    private DEFAULT_NOTIF_MESSAGES = true;\r\n\r\n    constructor(public auth: AuthProvider, private nav: NavController, private conf: ConfProvider, private userProvider:UserProvider /*, private backgroundMode: BackgroundMode*/) {\r\n        this.user = this.auth.getUser();\r\n        this.developer = this.auth.isFIRST();\r\n\r\n        this.opt_notifMessages = this.DEFAULT_NOTIF_MESSAGES;\r\n        this.opt_notifAppointments = this.DEFAULT_NOTIF_APPOINTMENTS;\r\n        //this.opt_runBackground = this.backgroundMode.isEnabled();\r\n    }\r\n\r\n    ionViewDidLoad() {\r\n        if (this.user && this.user.options) {\r\n            for (let i = 0; i < this.user.options.length; i++) {\r\n                if (this.user.options[i].code == 'OPT_NOTIF_APP') {\r\n                    this.opt_notifAppointments = this.user.options[i].value == \"Y\";\r\n                }\r\n                if (this.user.options[i].code == 'OPT_NOTIF_MSG') {\r\n                    this.opt_notifMessages = this.user.options[i].value == \"Y\";\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    updateOption(code: string, value: boolean): void {\r\n        let x=false;\r\n        if (code && this.user) {\r\n            //save option this.user.userId;\r\n            if (code === 'R') {\r\n                if (this.opt_runBackground) {\r\n                    //this.backgroundMode.enable();\r\n                } else {\r\n                    //this.backgroundMode.disable();\r\n                }\r\n            }\r\n            if(x){\r\n                this.conf.request('/mobile/user/options/set/'+code+'?value='+value)\r\n                    .then(res=> {\r\n                        console.log('option saved',res);\r\n                        if(res && res.result){\r\n                            this.userProvider.setOption(res.result);\r\n                        }\r\n                    }, (err) => {\r\n                        console.error('option not saved',err);\r\n                    })\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/options/options.ts"],"sourceRoot":""}
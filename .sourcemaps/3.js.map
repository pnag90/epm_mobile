{"version":3,"sources":["../../src/pages/worklist/worklist.module.ts","../../src/pipes/pipes.module.ts","../../src/pipes/safe.pipe.ts","../../src/pipes/moment.pipe.ts","../../src/pages/worklist/worklist.ts"],"names":[],"mappings":"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","file":"3.js","sourcesContent":["import { PipesModule } from '../../pipes/pipes.module';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { WorklistPage } from './worklist';\n\n@NgModule({\n    declarations: [WorklistPage],\n    imports: [IonicPageModule.forChild(WorklistPage), TranslateModule, PipesModule],\n    exports: [WorklistPage]\n})\nexport class WorklistPageModule { }\n\n\n// WEBPACK FOOTER //\n// ./src/pages/worklist/worklist.module.ts","import { SafePipe } from './safe.pipe';\nimport { MomentPipe } from './moment.pipe';\nimport { NgModule } from '@angular/core';\n\n@NgModule({\n    declarations: [MomentPipe, SafePipe],\n    imports: [],\n    exports: [MomentPipe, SafePipe]\n})\nexport class PipesModule { }\n\n\n// WEBPACK FOOTER //\n// ./src/pipes/pipes.module.ts","import { Pipe } from '@angular/core';\nimport { DomSanitizer, SafeHtml, SafeStyle, SafeScript, SafeUrl, SafeResourceUrl } from '@angular/platform-browser';\n\n@Pipe({\n\tname: 'safe'\n})\nexport class SafePipe {\n\n\tconstructor(protected _sanitizer: DomSanitizer) {\n\n\t}\n\n\tpublic transform(value: string, type: string = 'html'): SafeHtml | SafeStyle | SafeScript | SafeUrl | SafeResourceUrl {\n\t\tswitch (type) {\n\t\t\tcase 'html': return this._sanitizer.bypassSecurityTrustHtml(value);\n\t\t\tcase 'style': return this._sanitizer.bypassSecurityTrustStyle(value);\n\t\t\tcase 'script': return this._sanitizer.bypassSecurityTrustScript(value);\n\t\t\tcase 'url': return this._sanitizer.bypassSecurityTrustUrl(value);\n\t\t\tcase 'resourceUrl': return this._sanitizer.bypassSecurityTrustResourceUrl(value);\n\t\t\t//default: throw new Error(`Invalid safe type specified: ${type}`);\n\t\t\tdefault: return this._sanitizer.bypassSecurityTrustUrl(value);\n\t\t}\n\t}\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pipes/safe.pipe.ts","import { Pipe } from '@angular/core';\nimport * as moment from 'moment';\nimport 'moment/locale/pt';\n\n// under systemjs, moment is actually exported as the default export, so we account for that\n//-const momentConstructor: (value?: any) => moment.Moment = (<any>moment).default || moment;\n\n@Pipe({\n    name: 'moment'\n})\nexport class MomentPipe {\n\n    transform(value, args) {\n        args = args || '';\n        return args === 'ago' ? moment(value).fromNow() : moment(value).format(args);\n      }\n\n    /*transform(value: Date | moment.Moment, args?: any): any {\n        let formats: any = null;\n        let referenceTime: any = null;\n\n        if (typeof args === 'object' && !moment.isMoment(args)) {\n            formats = args;\n         } else {\n            referenceTime = momentConstructor(args);\n        }\n\n        return momentConstructor(value).calendar(referenceTime, formats);\n    }*/\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pipes/moment.pipe.ts","import { IonicPage, List, NavController, Refresher } from 'ionic-angular';\nimport { Component } from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\nimport { UtilsProvider } from '../../providers/utils-provider';\nimport { ConfProvider } from '../../providers/conf-provider';\nimport { AuthProvider } from '../../providers/auth-provider';\nimport { User, Episode } from '../../providers/epm-types';\nimport * as _ from 'lodash';\n\n@IonicPage()\n@Component({\n    selector: 'page-worklist',\n    templateUrl: 'worklist.html'\n})\nexport class WorklistPage {\n    // the list is a child of the schedule page\n    // @ViewChild('appointmentList') gets a reference to the list\n    // with the variable #appointmentList, `read: List` tells it to return\n    // the List and not a reference to the element\n    // not used by now @ViewChild('appointmentList', { read: List }) appointmentList: List;\n\n    private episodes: Array<Episode> = [];\n    private episodesDP: any;\n    private totalEpisodes: number;\n    private defaultPic: string;\n\n    private loading: boolean;\n    private pageNumber: number = 0;\n    private pageSize: number = 99;\n\n    private searchTxt: string = null;\n    private searchKey: string = null;\n    private currentDate: string;\n    private worklistDate: string = '';\n    private worklistFilter: string = 'future';\n\n    constructor(public auth: AuthProvider,\n        public conf: ConfProvider,\n        public util: UtilsProvider,\n        private translate: TranslateService,\n        private navCtrl: NavController) {\n        this.defaultPic = this.conf.defaultUserPhoto();\n        this.currentDate = this.util.currentDate();\n        this.loading = false;\n    }\n\n    ionViewDidLoad() {\n        this.totalEpisodes = 0;\n        this.getWorklist();\n    }\n\n    search(): void {\n        if (this.searchTxt != this.searchKey) {\n            this.getWorklist();\n        }\n    }\n\n    filterChanged(): void {\n        this.setDataProvider();\n    }\n\n    dateChanged(): void {\n        if (this.worklistDate != this.currentDate) {\n            this.getWorklist();\n        }\n    }\n\n    getWorklist(callback?: Function): void {\n        if (this.currentDate !== null) {\n            this.loading = true;\n            /* ViewChild Reference\n                // Close any open sliding items when the schedule updates\n                this.appointmentList && this.appointmentList.closeSlidingItems();\n            */\n            let url: string = '/mobile/appointment/episodes?d=' + this.util.dateToString(this.currentDate, \"YYYY-MM-DD\") + \"&ps=\" + this.pageSize + \"&pn=\" + this.pageNumber;\n            if (this.searchTxt != null && this.searchTxt.length > 1) {\n                this.searchKey = this.searchTxt;\n                url = url + '&s=' + this.searchKey;\n            }\n            this.conf.get(url).then(data => {\n                console.log(data);\n                this.episodesDP = this.conf.getEpisodes(data || []);\n                this.totalEpisodes = this.episodesDP.length || 0;\n                this.worklistDate = this.currentDate;\n                this.setDataProvider();\n                if (callback) {\n                    callback();\n                }\n            }, err => {\n                this.loading = false;\n                if (callback) {\n                    callback();\n                }\n            });\n        }\n    }\n\n    setDataProvider(): void {\n        this.loading = true;\n        let filterEpisodes: Array<Episode> = [];\n        let filterSelected: string = this.worklistFilter;\n        _.each(this.episodesDP, function (e) {\n            if (filterSelected === 'all' || (parseInt(e.status) < 3)) {\n                filterEpisodes.push(e);\n            }\n        });\n        this.episodes = filterEpisodes;\n        this.loading = false;\n    }\n\n    doRefresh(refresher: Refresher) {\n        this.getWorklist(function () {\n            refresher.complete();\n        });\n    }\n\n    openEpisode(episode: Episode) {\n        if (episode) {\n            this.navCtrl.push('EpisodePage', { episode: episode });\n        }\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/worklist/worklist.ts"],"sourceRoot":""}
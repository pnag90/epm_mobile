{"version":3,"sources":["../../src/pages/profile/form/profile-edit.module.ts","../../src/pipes/pipes.module.ts","../../src/pipes/safe.pipe.ts","../../src/pipes/moment.pipe.ts","../../src/pages/profile/form/profile-edit.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAsD;AACb;AACO;AACC;AACS;AAO1D;IAAA;IAAiC,CAAC;IAArB,iBAAiB;QAL7B,uEAAQ,CAAC;YACN,YAAY,EAAE,CAAC,sEAAe,CAAC;YAC/B,OAAO,EAAE,CAAC,sEAAe,CAAC,QAAQ,CAAC,sEAAe,CAAC,EAAE,4EAAe,EAAE,wEAAW,CAAC;YAClF,OAAO,EAAE,CAAC,sEAAe,CAAC;SAC7B,CAAC;OACW,iBAAiB,CAAI;IAAD,wBAAC;CAAA;AAAJ;;;;;;;;;;;;;;;;;;;ACXS;AACI;AACF;AAOzC;IAAA;IAA2B,CAAC;IAAf,WAAW;QALvB,uEAAQ,CAAC;YACN,YAAY,EAAE,CAAC,gEAAU,EAAE,4DAAQ,CAAC;YACpC,OAAO,EAAE,EAAE;YACX,OAAO,EAAE,CAAC,gEAAU,EAAE,4DAAQ,CAAC;SAClC,CAAC;OACW,WAAW,CAAI;IAAD,kBAAC;CAAA;AAAJ;;;;;;;;;;;;;;;;;;;;;ACTa;AAC+E;AAKpH;IAEC,kBAAsB,UAAwB;QAAxB,eAAU,GAAV,UAAU,CAAc;IAE9C,CAAC;IAEM,4BAAS,GAAhB,UAAiB,KAAa,EAAE,IAAqB;QAArB,oCAAqB;QACpD,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;YACd,KAAK,MAAM,EAAE,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,uBAAuB,CAAC,KAAK,CAAC,CAAC;YACnE,KAAK,OAAO,EAAE,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,wBAAwB,CAAC,KAAK,CAAC,CAAC;YACrE,KAAK,QAAQ,EAAE,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,yBAAyB,CAAC,KAAK,CAAC,CAAC;YACvE,KAAK,KAAK,EAAE,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,sBAAsB,CAAC,KAAK,CAAC,CAAC;YACjE,KAAK,aAAa,EAAE,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,8BAA8B,CAAC,KAAK,CAAC,CAAC;YACjF,mEAAmE;YACnE,SAAS,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,sBAAsB,CAAC,KAAK,CAAC,CAAC;QAC/D,CAAC;IACF,CAAC;IAhBW,QAAQ;QAHpB,mEAAI,CAAC;YACL,IAAI,EAAE,MAAM;SACZ,CAAC;yCAGiC,+EAAY;OAFlC,QAAQ,CAkBpB;IAAD,eAAC;CAAA;AAlBoB;;;;;;;;;;;;;;;;;;;;;ACNgB;AACJ;AACP;AAE1B,4FAA4F;AAC5F,6FAA6F;AAK7F;IAAA;IAmBA,CAAC;IAjBG,8BAAS,GAAT,UAAU,KAAK,EAAE,IAAI;QACjB,IAAI,GAAG,IAAI,IAAI,EAAE,CAAC;QAClB,MAAM,CAAC,IAAI,KAAK,KAAK,CAAC,CAAC,CAAC,oCAAM,CAAC,KAAK,CAAC,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC,oCAAM,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;IAC/E,CAAC;IALM,UAAU;QAHtB,mEAAI,CAAC;YACF,IAAI,EAAE,QAAQ;SACjB,CAAC;OACW,UAAU,CAmBtB;IAAD,iBAAC;CAAA;AAnBsB;;;;;;;;;;;;;;;;;;;;;;;ACRmB;AACuD;AACpC;AACG;AAQhE;IAKI,yBAAoB,GAAkB,EAC1B,SAA0B,EAC3B,eAAsC,EACrC,IAAkB,EAClB,MAAiB,EAClB,MAAc;QALL,QAAG,GAAH,GAAG,CAAe;QAC1B,cAAS,GAAT,SAAS,CAAiB;QAC3B,oBAAe,GAAf,eAAe,CAAuB;QACrC,SAAI,GAAJ,IAAI,CAAc;QAClB,WAAM,GAAN,MAAM,CAAW;QAClB,WAAM,GAAN,MAAM,CAAQ;QAErB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC;QAC/C,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;IACxC,CAAC;IAED,0CAAgB,GAAhB;QACI,IAAI,CAAC,kBAAkB,EAAE,CAAC;IAC9B,CAAC;IACD,4CAAkB,GAAlB;QAAA,iBAiEC;QAhEG,IAAI,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;QACzB,IAAI,cAAc,GAAG,IAAI,CAAC,OAAO,CAAC;QAElC,IAAI,WAAW,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;YAC1C,KAAK,EAAE,mBAAmB;YAC1B,OAAO,EAAE;gBACL;oBACI,IAAI,EAAE,gBAAgB;oBACtB,IAAI,EAAE,aAAa;oBACnB,OAAO,EAAE;wBACJ,sBAAsB;wBACtB,IAAM,aAAa,GAAkB;4BAClC,OAAO,EAAE,GAAG;4BACZ,eAAe,EAAE,MAAM,CAAC,eAAe,CAAC,QAAQ;4BAChD,YAAY,EAAE,MAAM,CAAC,YAAY,CAAC,GAAG;4BACrC,SAAS,EAAE,MAAM,CAAC,SAAS,CAAC,OAAO;4BACnC,UAAU,EAAE,MAAM,CAAC,iBAAiB,CAAC,MAAM;4BAC3C,kBAAkB,EAAE,IAAI;yBAC3B,CAAC;wBACF,MAAM,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,UAAC,SAAS;4BAC5C,cAAc,CAAC,SAAS,CAAC,CAAC;wBAC5B,CAAC,EAAE,UAAC,GAAG;4BACL,eAAe;4BACf,OAAO,CAAC,GAAG,CAAC,cAAc,EAAC,GAAG,CAAC,CAAC;wBAClC,CAAC,CAAC,CAAC;oBACT,CAAC;iBACJ,EAAE;oBACC,IAAI,EAAE,kBAAkB;oBACxB,OAAO,EAAE;wBACL,IAAI,KAAK,GAAG,KAAI,CAAC,SAAS,CAAC,MAAM,CAAC;4BAC9B,OAAO,EAAE,aAAa;4BACtB,QAAQ,EAAE,IAAI;4BACd,QAAQ,EAAE,QAAQ;yBACrB,CAAC,CAAC;wBACH,KAAK,CAAC,OAAO,EAAE,CAAC;wBAEhB,IAAI,OAAO,GAAG;4BACV,kBAAkB,EAAE,CAAC;4BACrB,KAAK,EAAE,GAAG;4BACV,MAAM,EAAE,GAAG;4BACX,OAAO,EAAE,EAAE;yBACd,CAAC;wBACD,sBAAsB;wBAEvB,IAAM,aAAa,GAAkB;4BACjC,OAAO,EAAE,GAAG;4BACZ,eAAe,EAAE,MAAM,CAAC,eAAe,CAAC,QAAQ;4BAChD,YAAY,EAAE,MAAM,CAAC,YAAY,CAAC,GAAG;4BACrC,UAAU,EAAE,MAAM,CAAC,iBAAiB,CAAC,YAAY;4BACjD,kBAAkB,EAAE,IAAI;4BACxB,WAAW,EAAE,GAAG;4BAChB,YAAY,EAAE,GAAG;yBACpB,CAAC;wBACF,MAAM,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,UAAC,SAAS;4BAC5C,cAAc,CAAC,SAAS,CAAC,CAAC;wBAC5B,CAAC,EAAE,UAAC,GAAG;4BACL,eAAe;4BACf,OAAO,CAAC,GAAG,CAAC,cAAc,EAAC,GAAG,CAAC,CAAC;wBAClC,CAAC,CAAC,CAAC;oBACT,CAAC;iBACJ;aACJ;SACJ,CAAC,CAAC;QACH,WAAW,CAAC,OAAO,EAAE,CAAC;IAC1B,CAAC;IAED,iCAAO,GAAP,UAAQ,SAAS;QACb,4DAA4D;QAC5D,kBAAkB;QAClB,OAAO,CAAC,GAAG,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;QACnC,mBAAmB;QAClB,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,wBAAwB,GAAG,SAAS,CAAC;IAC3D,CAAC;IAED,8BAAI,GAAJ;QACI,kBAAkB;QAClB,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,IAAE,IAAI,CAAC,EAAC;YAE7C,cAAc;YACd,IAAI,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;gBAC9B,OAAO,EAAE,mBAAmB;gBAC5B,QAAQ,EAAE,IAAI;gBACd,QAAQ,EAAE,QAAQ;aACrB,CAAC,CAAC;YACH,KAAK,CAAC,OAAO,EAAE,CAAC;YAEhB,IAAI,CAAC,MAAM,EAAE,CAAC;QAClB,CAAC;IACL,CAAC;IAED,wCAAc,GAAd;IAEA,CAAC;IAED,gCAAM,GAAN;QACI,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC;IACnB,CAAC;IApHQ,eAAe;QAJ3B,wEAAS,CAAC;YACP,QAAQ,EAAE,mBAAmB;WACG;SACnC,CAAC;mFAMwC;YACf,4EAAe;YACV,+EAAqB;YAC/B,iEAAY;YACV,sEAAS;YACV,MAAM;OAVhB,eAAe,CAsH3B;IAAD,CAAC;AAAA;SAtHY,eAAe,gB","file":"4.js","sourcesContent":["import { TranslateModule } from '@ngx-translate/core';\r\nimport { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { ProfileEditPage } from './profile-edit';\r\nimport { PipesModule } from '../../../pipes/pipes.module';\r\n\r\n@NgModule({\r\n    declarations: [ProfileEditPage],\r\n    imports: [IonicPageModule.forChild(ProfileEditPage), TranslateModule, PipesModule],\r\n    exports: [ProfileEditPage]\r\n})\r\nexport class ProfilePageModule { }\n\n\n// WEBPACK FOOTER //\n// ./src/pages/profile/form/profile-edit.module.ts","import { SafePipe } from './safe.pipe';\r\nimport { MomentPipe } from './moment.pipe';\r\nimport { NgModule } from '@angular/core';\r\n\r\n@NgModule({\r\n    declarations: [MomentPipe, SafePipe],\r\n    imports: [],\r\n    exports: [MomentPipe, SafePipe]\r\n})\r\nexport class PipesModule { }\n\n\n// WEBPACK FOOTER //\n// ./src/pipes/pipes.module.ts","import { Pipe } from '@angular/core';\r\nimport { DomSanitizer, SafeHtml, SafeStyle, SafeScript, SafeUrl, SafeResourceUrl } from '@angular/platform-browser';\r\n\r\n@Pipe({\r\n\tname: 'safe'\r\n})\r\nexport class SafePipe {\r\n\r\n\tconstructor(protected _sanitizer: DomSanitizer) {\r\n\r\n\t}\r\n\r\n\tpublic transform(value: string, type: string = 'html'): SafeHtml | SafeStyle | SafeScript | SafeUrl | SafeResourceUrl {\r\n\t\tswitch (type) {\r\n\t\t\tcase 'html': return this._sanitizer.bypassSecurityTrustHtml(value);\r\n\t\t\tcase 'style': return this._sanitizer.bypassSecurityTrustStyle(value);\r\n\t\t\tcase 'script': return this._sanitizer.bypassSecurityTrustScript(value);\r\n\t\t\tcase 'url': return this._sanitizer.bypassSecurityTrustUrl(value);\r\n\t\t\tcase 'resourceUrl': return this._sanitizer.bypassSecurityTrustResourceUrl(value);\r\n\t\t\t//default: throw new Error(`Invalid safe type specified: ${type}`);\r\n\t\t\tdefault: return this._sanitizer.bypassSecurityTrustUrl(value);\r\n\t\t}\r\n\t}\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pipes/safe.pipe.ts","import { Pipe } from '@angular/core';\r\nimport * as moment from 'moment';\r\nimport 'moment/locale/pt';\r\n\r\n// under systemjs, moment is actually exported as the default export, so we account for that\r\n//-const momentConstructor: (value?: any) => moment.Moment = (<any>moment).default || moment;\r\n\r\n@Pipe({\r\n    name: 'moment'\r\n})\r\nexport class MomentPipe {\r\n\r\n    transform(value, args) {\r\n        args = args || '';\r\n        return args === 'ago' ? moment(value).fromNow() : moment(value).format(args);\r\n      }\r\n\r\n    /*transform(value: Date | moment.Moment, args?: any): any {\r\n        let formats: any = null;\r\n        let referenceTime: any = null;\r\n\r\n        if (typeof args === 'object' && !moment.isMoment(args)) {\r\n            formats = args;\r\n         } else {\r\n            referenceTime = momentConstructor(args);\r\n        }\r\n\r\n        return momentConstructor(value).calendar(referenceTime, formats);\r\n    }*/\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pipes/moment.pipe.ts","import { cacheLoader } from '@ionic/app-scripts/dist/webpack/cache-loader-impl';\r\n\r\nimport { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, ActionSheetController, ToastController } from 'ionic-angular';\r\nimport { Camera, CameraOptions } from '@ionic-native/camera';\r\nimport { ConfProvider } from '../../../providers/conf-provider';\r\nimport { User } from '../../../providers/epm-types';\r\n\r\n@IonicPage()\r\n@Component({\r\n    selector: 'page-profile-edit',\r\n    templateUrl: 'profile-edit.html'\r\n})\r\nexport class ProfileEditPage {\r\n    private user: User;\r\n    private defaultPic: string;\r\n    private newPhoto;\r\n\r\n    constructor(private nav: NavController, \r\n        private toastCtrl: ToastController,\r\n        public actionSheetCtrl: ActionSheetController, \r\n        private conf: ConfProvider, \r\n        private params: NavParams,\r\n        public camera: Camera) {\r\n\r\n        this.defaultPic = this.conf.defaultUserPhoto();\r\n        this.user = this.params.get('user');\r\n    }\r\n\r\n    choseUserHeadImg() {\r\n        this.presentActionSheet();\r\n    }\r\n    presentActionSheet() {\r\n        let camera = this.camera;\r\n        let cameraCallback = this.capture;\r\n\r\n        let actionSheet = this.actionSheetCtrl.create({\r\n            title: \"Imagem Utilizador\",\r\n            buttons: [\r\n                {\r\n                    text: 'Tirar uma foto',\r\n                    role: 'destructive',\r\n                    handler: () => {\r\n                         //setup camera options\r\n                         const cameraOptions: CameraOptions = {\r\n                            quality: 100,\r\n                            destinationType: camera.DestinationType.DATA_URL,     //this.camera.DestinationType.FILE_URI\r\n                            encodingType: camera.EncodingType.PNG,\r\n                            mediaType: camera.MediaType.PICTURE,\r\n                            sourceType: camera.PictureSourceType.CAMERA,\r\n                            correctOrientation: true\r\n                        };\r\n                        camera.getPicture(cameraOptions).then((imageData) => {\r\n                            cameraCallback(imageData);\r\n                          }, (err) => {\r\n                            // Handle error\r\n                            console.log('CAMERA ERROR',err);\r\n                          });\r\n                    }\r\n                }, {\r\n                    text: 'Escolha do album',\r\n                    handler: () => {\r\n                        let toast = this.toastCtrl.create({\r\n                            message: 'Abrir album',\r\n                            duration: 2000,\r\n                            position: 'bottom'\r\n                        });\r\n                        toast.present();\r\n\r\n                        let options = {\r\n                            maximumImagesCount: 1,\r\n                            width: 800,\r\n                            height: 800,\r\n                            quality: 80\r\n                        };\r\n                         //setup camera options\r\n                        \r\n                        const cameraOptions: CameraOptions = {\r\n                            quality: 100,\r\n                            destinationType: camera.DestinationType.DATA_URL,     //    FILE_URI    DATA_URL\r\n                            encodingType: camera.EncodingType.PNG,\r\n                            sourceType: camera.PictureSourceType.PHOTOLIBRARY,\r\n                            correctOrientation: true,\r\n                            targetWidth: 500,\r\n                            targetHeight: 500,\r\n                        };\r\n                        camera.getPicture(cameraOptions).then((imageData) => {\r\n                            cameraCallback(imageData);\r\n                          }, (err) => {\r\n                            // Handle error\r\n                            console.log('CAMERA ERROR',err);\r\n                          });\r\n                    }\r\n                }\r\n            ]\r\n        });\r\n        actionSheet.present();\r\n    }\r\n\r\n    capture(imageData) {\r\n        // imageData is either a base64 encoded string or a file URI\r\n        // If it's base64:\r\n        console.log('new img', imageData);\r\n       // this.newPhoto = \r\n        this.user.photo = 'data:image/png;base64,' + imageData;\r\n    }\r\n\r\n    save() {\r\n        // set image on bd\r\n        if (this.user != null && this.user.userId!=null){\r\n           \r\n            // reload user\r\n            let toast = this.toastCtrl.create({\r\n                message: 'Perfil atualizado',\r\n                duration: 2000,\r\n                position: 'bottom'\r\n            });\r\n            toast.present();\r\n\r\n            this.goBack();\r\n        }\r\n    }\r\n\r\n    ionViewDidLoad() {\r\n\r\n    }\r\n\r\n    goBack() {\r\n        this.nav.pop();\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/profile/form/profile-edit.ts"],"sourceRoot":""}